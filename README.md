# Telegram-–±–æ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π

–ë–æ—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π, –∑–∞—á–µ—Ç–æ–≤ –∏ —ç–∫–∑–∞–º–µ–Ω–æ–≤ –ö–§–£.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- üìù –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞—á–µ—Ç–æ–≤
- üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —ç–∫–∑–∞–º–µ–Ω–æ–≤
- ‚ùÑÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∏–º–Ω–µ–π —Å–µ—Å—Å–∏–∏
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- üë• –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- 1GB RAM (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏)
- SQLite3

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository_url>
cd –±–æ—Ç–∏–∫
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python3 -m venv venv
source venv/bin/activate  # Linux/macOS
# –∏–ª–∏
venv\Scripts\activate  # Windows
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cp .env.example .env
nano .env  # –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ:
- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
- `ADMIN_ID` ‚Äî –≤–∞—à Telegram ID (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –Ω—É–∂–µ–Ω –¥–ª—è –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥)

### 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–ü–æ–ª–æ–∂–∏—Ç–µ —Ñ–∞–π–ª—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ –ø–∞–ø–∫–∏:
- –û—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å —Å–∞–π—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –§–∞–π–ª—ã –∑–∞—á–µ—Ç–æ–≤ –∏ —ç–∫–∑–∞–º–µ–Ω–æ–≤ ‚Äî –≤ –ø–∞–ø–∫—É `–∑–∞—á–µ—Ç—ã –∏ —Å–µ—Å—Å–∏—è/`
- –§–∞–π–ª—ã –æ –¥–∞—Ç–∞—Ö —Å–µ—Å—Å–∏–∏ (DOCX) ‚Äî –≤ –ø–∞–ø–∫—É `schedule_bot/—Å–µ—Å—Å–∏—è/`

## –ó–∞–ø—É—Å–∫

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ)
source venv/bin/activate

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
python -m schedule_bot.bot
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
schedule_bot/
‚îú‚îÄ‚îÄ bot.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ handlers/           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ start.py       # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ schedule.py    # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ exams.py       # –ó–∞—á–µ—Ç—ã –∏ —ç–∫–∑–∞–º–µ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ admin.py       # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ cache.py       # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ storage.py     # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ fetcher.py     # –ó–∞–≥—Ä—É–∑–∫–∞ —Å —Å–∞–π—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ parser.py      # –ü–∞—Ä—Å–∏–Ω–≥ Excel
‚îÇ   ‚îú‚îÄ‚îÄ exams_parser.py    # –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞—á–µ—Ç–æ–≤/—ç–∫–∑–∞–º–µ–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ exams_storage.py   # –•—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞—á–µ—Ç–æ–≤/—ç–∫–∑–∞–º–µ–Ω–æ–≤ (LRU-–∫—ç—à)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îî‚îÄ‚îÄ activity.py    # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ schedule_data/     # –ö—ç—à —Ñ–∞–π–ª–æ–≤ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ —Å–µ—Å—Å–∏—è/            # –§–∞–π–ª—ã –æ –¥–∞—Ç–∞—Ö —Å–µ—Å—Å–∏–∏ (DOCX)
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

–ë–æ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å **1GB RAM**:

- –û—Å–Ω–æ–≤–Ω–æ–π –∫—ç—à: **20 –ú–ë** (—Å LRU-—ç–≤–∏–∫—Ü–∏–µ–π)
- –ó–∞—á–µ—Ç—ã/—ç–∫–∑–∞–º–µ–Ω—ã: **~1 –ú–ë** (lazy loading + LRU)
- TTL –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏
- –†–∞–±–æ—Ç–∞ —Å –¥–∏—Å–∫–æ–º –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [MEMORY_OPTIMIZATION_v2.md](MEMORY_OPTIMIZATION_v2.md)

## –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `ADMIN_ID` –≤ `.env`:

- `/admin` ‚Äî –º–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- `/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞
- `/users [–≥—Ä—É–ø–ø–∞]` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥—Ä—É–ø–ø—ã

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
pip install flake8 mypy

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è
flake8 schedule_bot/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
mypy schedule_bot/
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ `.env`:
```bash
LOG_LEVEL=DEBUG          # –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
LOG_INCLUDE_LIBS=1       # –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
```

## –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository_url>
cd –±–æ—Ç–∏–∫

# 2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env
cp .env.example .env
nano .env

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ screen/tmux
screen -S bot
python -m schedule_bot.bot
# Ctrl+A, D –¥–ª—è –æ—Ç—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ systemd (—Å–æ–∑–¥–∞–π—Ç–µ `/etc/systemd/system/schedule-bot.service`).

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ê–≤—Ç–æ—Ä

–®–∞–º–∏–ª—å –°–∞–¥—ã–∫–æ–≤

